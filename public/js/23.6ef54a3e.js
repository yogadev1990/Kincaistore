(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"29d2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("q-page",{},[e("q-header",{staticClass:"text-primary bg-white",attrs:{reveal:"","reveal-offset":10}},[e("q-toolbar",[e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_back"},on:{click:t.handleBackButton}}),e("q-toolbar-title",{staticClass:"text-weight-bold brand"},[t._v("Checkout")])],1)],1),t.carts&&t.carts.length?e("div",{ref:"top",staticClass:"q-pb-xl",attrs:{id:"checkout"}},[e("shipping-address",{attrs:{isModalAddress:t.isAvailableOldAddress},on:{place:t.placeOrder,closeModal:function(e){t.isAvailableOldAddress=!1}}})],1):t._e(),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1),e("q-footer",{staticClass:"bg-white q-pa-md"},[e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"",unelevated:"",label:"Proses Pesanan",color:"primary"},on:{click:t.directChekout}})],1)],1)},n=[],o=(a("99af"),a("a15b"),a("14d9"),a("b0c0"),a("e9f5"),a("7d54"),a("d3b7"),a("ac1f"),a("5319"),a("2ca0"),a("159b"),a("54df")),r={components:{ShippingAddress:o["a"]},name:"DirectWithShipping",data:function(){return{isAvailableOldAddress:!1,isOk:!1,formLoading:!1,form:{reference:"",customer_name:"",customer_email:"",customer_whatsapp:"",address:"",items:[],subtotal:0,total:0,quantity:0,weight:0,shipping_courier_name:"COD",shipping_cost:"",shipping_courier_service:""}}},computed:{carts:function(){return this.$store.state.cart.carts},shop:function(){return this.$store.state.shop},config:function(){return this.$store.state.config},loading:function(){return this.$store.state.loading},session_id:function(){return this.$store.state.session_id}},mounted:function(){this.carts.length||this.$router.back(),this.checkDataUser()},methods:{placeOrder:function(t){this.form=t,this.checkStepOk()},checkDataUser:function(){localStorage.getItem("user_data")&&(this.isAvailableOldAddress=!0)},handleBackButton:function(){this.$router.push({name:"Cart"})},toTop:function(){var t=this;setTimeout((function(){var e=t.$refs.top;e.scrollIntoView({behavior:"smooth"})}),500)},checkStepOk:function(){this.form.customer_name&&this.form.customer_whatsapp&&this.form.shipping_courier_name&&this.form.address?this.isOk=!0:this.isOk=!1},directChekout:function(){var t=this;if(this.checkStepOk(),this.isOk){var e="https://api.whatsapp.com",a=this.formatPhoneNumber(this.shop.phone),s="Halo kak, saya mau order:\n\n",n=this.carts,o=1;n.forEach((function(e){s+="*".concat(o,". ").concat(e.name,"*\nJumlah: ").concat(e.quantity,"\nHarga (@): ").concat(t.moneyIDR(e.price),"\nHarga Total: ").concat(t.moneyIDR(e.quantity*e.price),"\n\n"),o++})),s+="Subtotal: *".concat(this.moneyIDR(this.subtotal()),"*\nTotal: *").concat(this.moneyIDR(this.subtotal()),"*\n-----------------------------------\n\n*Nama:*\n ").concat(this.form.customer_name," (").concat(this.form.customer_whatsapp,")\n\n*Alamat:*\n").concat(this.formatAddressCod(this.form.address),"\n\n");var r=e+"/send?phone="+a+"&text="+encodeURI(s);setTimeout((function(){t.$router.push({name:"Cart"})}),1e3),setTimeout((function(){t.$store.dispatch("cart/clearCart",t.session_id)}),5e3),window.open(r,"_blank")}},formatPhoneNumber:function(t){var e=t.replace(/\D/g,"");return e.startsWith("0")&&(e="62"+e.substr(1)),e},subtotal:function(){if(this.carts.length>1){var t=[];return this.carts.forEach((function(e){t.push(e.quantity*e.price)})),t.reduce((function(t,e){return t+e}))}return this.carts[0].quantity*this.carts[0].price},total:function(){return this.subtotal()+this.form.shipping_cost},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)},formatAddressCod:function(t){var e=t.split("<br>");return e.join("\n")}}},i=r,c=a("2877"),u=a("9989"),h=a("e359"),l=a("65c6"),d=a("9c40"),p=a("6ac5"),f=a("74f7"),m=a("e669"),b=a("7ff0"),g=a("eebe"),k=a.n(g),_=Object(c["a"])(i,s,n,!1,null,null,null);e["default"]=_.exports;k()(_,"components",{QPage:u["a"],QHeader:h["a"],QToolbar:l["a"],QBtn:d["a"],QToolbarTitle:p["a"],QInnerLoading:f["a"],QSpinnerFacebook:m["a"],QFooter:b["a"]})}}]);