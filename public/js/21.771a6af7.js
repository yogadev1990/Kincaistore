(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{de0f:function(e,t,i){"use strict";i.r(t);i("a4d3"),i("e01a");var a=function(){var e=this,t=e._self._c;return t("q-page",{},[t("q-header",[t("q-toolbar",[t("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"arrow_back"}}),t("q-toolbar-title",[e._v("\n       "+e._s(e.formType)+" Kategori\n      ")])],1)],1),t("div",{staticClass:"q-pa-md q-gutter-y-md"},[t("q-input",{attrs:{filled:"",label:"Title",rules:[function(e){return e&&e.length>0||"Wajib diisi"}]},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),t("q-input",{attrs:{filled:"",autogrow:"",label:"Deskripsi"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),t("q-input",{attrs:{filled:"",mask:"####",label:"Urutan",rules:[function(e){return e&&e.length>0||"Wajib diisi"}]},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),t("div",{staticClass:"border rounded q-pa-sm"},[t("div",[t("q-toggle",{attrs:{label:"Tampilkan produk di beranda"},model:{value:e.form.is_front,callback:function(t){e.$set(e.form,"is_front",t)},expression:"form.is_front"}}),t("div",{staticClass:"text-xs text-grey-6 q-pa-xs"},[e._v("\n          Pilihan apakah produk dibawah kategori ini akan di listing di halaman beranda\n        ")])],1)]),t("div",[t("div",{staticClass:"row items-center justify-between"},[t("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Ikon",size:"sm",color:"primary",icon:"upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewImage.apply(null,arguments)}}}),t("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Banner",size:"sm",color:"teal",icon:"upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewBanner.apply(null,arguments)}}})],1),e.errors.images?t("div",{staticClass:"text-xs text-red q-my-md"},[e._v(" "+e._s(e.errors.images[0]))]):e._e()]),t("div",[t("input",{ref:"image",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateImagePreview}}),t("input",{ref:"banner",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateBannerPreview}}),e.imagePreview?t("div",{staticClass:"my-lg"},[t("div",{staticClass:"text-weight-bold text-md"},[e._v("Ikon")]),t("q-list",{attrs:{bordered:""}},[t("q-item",[t("q-item-section",[t("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"80px",height:"auto","object-fit":"contain"},attrs:{src:e.imagePreview}})]),t("q-space"),t("q-item-section",{attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"delete"},on:{click:e.removeImage}})],1)],1)],1)],1):e._e()]),e.bannerPreview?t("div",{staticClass:"my-lg"},[t("div",{staticClass:"text-weight-bold text-md"},[e._v("Banner")]),t("q-list",{attrs:{bordered:""}},[t("q-item",[t("q-item-section",[t("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"200px",height:"auto","object-fit":"contain"},attrs:{src:e.bannerPreview}})]),t("q-space"),t("q-item-section",{attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"delete"},on:{click:e.removeBanner}})],1)],1)],1)],1):e._e()],1),t("q-footer",[t("q-btn",{staticClass:"full-width",attrs:{loading:e.loading,label:"Simpan"},on:{click:e.submit}},[t("q-tooltip",{staticClass:"bg-accent"},[e._v("Simpan")])],1)],1)],1)},r=[],s=i("ded3"),o=i.n(s),n=i("2f62"),c={data:function(){return{category:this.$route.query.edit?this.$store.getters["category/getById"](parseInt(this.$route.query.edit)):"",formType:"Add",form:{id:"",images:"",title:"",description:"",is_front:!0,weight:1,banner:"",remove_banner:!1},modal:!1,imagePreview:"",bannerPreview:""}},computed:o()({},Object(n["e"])({loading:function(e){return e.loading},errors:function(e){return e.errors}})),created:function(){var e=this;this.clearForm(),this.$route.query.edit?(this.formType="Edit",this.category?this.setData():this.getCategory(this.$route.query.edit).then((function(t){e.category=t.data.results,e.setData()}))):(this.formType="Add",this.category={},this.clearForm())},methods:o()(o()({},Object(n["b"])("category",["categoryStore","getCategories","getCategory","categoryUpdate"])),{},{submit:function(){var e=new FormData;e.append("title",this.form.title),e.append("description",this.form.description),e.append("images",this.form.images),e.append("banner",this.form.banner),e.append("weight",this.form.weight),e.append("is_front",this.form.is_front),"Edit"==this.formType&&e.append("remove_banner",this.form.remove_banner),"Add"==this.formType&&(e.append("_method","POST"),this.categoryStore(e)),"Edit"==this.formType&&(e.append("_method","PUT"),this.categoryUpdate({id:this.form.id,data:e}))},selectNewImage:function(){this.$refs.image.click()},selectNewBanner:function(){this.$refs.banner.click()},updateImagePreview:function(){var e=this,t=this.$refs.image.files[0];if(t){this.form.images=t;var i=new FileReader;i.onload=function(t){e.imagePreview=t.target.result},i.readAsDataURL(t)}},updateBannerPreview:function(){var e=this,t=this.$refs.banner.files[0];if(t){this.form.banner=t;var i=new FileReader;i.onload=function(t){e.bannerPreview=t.target.result},i.readAsDataURL(t)}},setData:function(){this.form.id=this.category.id,this.form.title=this.category.title,this.form.description=this.category.description?this.category.description:"",this.form.weight=this.category.weight,this.form.is_front=this.category.is_front,this.form.is_special=this.category.is_special,this.imagePreview=this.category.src?this.category.src:"",this.bannerPreview=this.category.banner_src?this.category.banner_src:""},clearForm:function(){this.form.id="",this.form.title="",this.form.description="",this.form.weight=1,this.form.is_front=!0,this.form.is_special="",this.form.images="",this.form.banner="",this.form.remove_banner=!1,this.imagePreview="",this.bannerPreview=""},removeImage:function(){this.imagePreview="",this.form.images=""},removeBanner:function(){this.bannerPreview="",this.form.banner="",this.form.remove_banner=!0}})},l=c,d=i("2877"),m=i("9989"),f=i("e359"),h=i("65c6"),g=i("9c40"),p=i("6ac5"),u=i("27f9"),b=i("9564"),v=i("1c1c"),w=i("66e5"),y=i("4074"),q=i("2c91"),_=i("7ff0"),k=i("05c0"),P=i("2eeb"),x=i("eebe"),C=i.n(x),T=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=T.exports;C()(T,"components",{QPage:m["a"],QHeader:f["a"],QToolbar:h["a"],QBtn:g["a"],QToolbarTitle:p["a"],QInput:u["a"],QToggle:b["a"],QList:v["a"],QItem:w["a"],QItemSection:y["a"],QSpace:q["a"],QFooter:_["a"],QTooltip:k["a"]}),C()(T,"directives",{GoBack:P["a"]})}}]);